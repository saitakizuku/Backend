{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Bort=_ref=>{let{name,flg,setFlg}=_ref;const[selectedGame,setSelectedGame]=useState('');const[successMessage,setSuccessMessage]=useState('');const[games,setGames]=useState([]);useEffect(()=>{fetchGames();},[]);const fetchGames=()=>{// 投票数を取得\naxios.get('http://localhost:5000/game_selection').then(response=>{setGames(response.data);}).catch(error=>{console.error('Error fetching game selections:',error);});};const handleGameSelect=game=>{setSelectedGame(game);setFlg(false);axios.post('http://localhost:5000/game_selection',{game}).then(()=>{setSuccessMessage('投票ありがとうございます！');fetchGames();}).catch(error=>{console.error('Error recording game selection:',error);setSuccessMessage('投票に失敗しました');});};const handleReset=()=>{axios.post('http://localhost:5000/reset').then(()=>{setSuccessMessage('Database reset successfully');fetchGames();}).catch(error=>{console.error('Error resetting database:',error);setSuccessMessage('Failed to reset database');});};return/*#__PURE__*/_jsxs(\"div\",{children:[flg?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleGameSelect(name),children:\"\\u6295\\u7968\"}):null,/*#__PURE__*/_jsx(\"button\",{onClick:handleReset,children:\"\\u30EA\\u30BB\\u30C3\\u30C8\"}),/*#__PURE__*/_jsx(\"p\",{children:successMessage}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\u6295\\u7968\\u6570\"}),/*#__PURE__*/_jsx(\"ul\",{children:games.map(game=>game.game===name?/*#__PURE__*/_jsxs(\"li\",{children:[game.game,\": \",game.count]},game.game):null)})]});};export default Bort;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Bort","_ref","name","flg","setFlg","selectedGame","setSelectedGame","successMessage","setSuccessMessage","games","setGames","fetchGames","get","then","response","data","catch","error","console","handleGameSelect","game","post","handleReset","children","onClick","map","count"],"sources":["C:/Users/斎田 築/Documents/javascript/type/y-app/src/pages/bort.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface Game {\r\n    game: string;\r\n    count: number;\r\n}\r\n\r\ninterface Props{\r\n    name: string;\r\n    flg: boolean;\r\n    setFlg: React.Dispatch<React.SetStateAction<boolean>>;\r\n}\r\n\r\nconst Bort:React.FC<Props> = ({name, flg, setFlg}) => {\r\n    const [selectedGame, setSelectedGame] = useState<string>('');\r\n    const [successMessage, setSuccessMessage] = useState<string>('');\r\n    const [games, setGames] = useState<Game[]>([]);\r\n\r\n    useEffect(() => {\r\n        fetchGames();\r\n    }, []);\r\n\r\n    const fetchGames = () => {\r\n        // 投票数を取得\r\n        axios.get('http://localhost:5000/game_selection')\r\n            .then((response) => {\r\n                setGames(response.data);\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error fetching game selections:', error);\r\n            });\r\n    };\r\n\r\n    const handleGameSelect = (game: string) => {\r\n        setSelectedGame(game);\r\n        setFlg(false);\r\n\r\n        axios.post('http://localhost:5000/game_selection', { game })\r\n            .then(() => {\r\n                setSuccessMessage('投票ありがとうございます！');\r\n                fetchGames();\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error recording game selection:', error);\r\n                setSuccessMessage('投票に失敗しました');\r\n            });\r\n    };\r\n\r\n    const handleReset = () => {\r\n        axios.post('http://localhost:5000/reset')\r\n            .then(() => {\r\n                setSuccessMessage('Database reset successfully');\r\n                fetchGames();\r\n            })\r\n            .catch((error) => {\r\n                console.error('Error resetting database:', error);\r\n                setSuccessMessage('Failed to reset database');\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {flg ? <button onClick={() => handleGameSelect(name)}>投票</button> : null}\r\n            <button onClick={handleReset}>リセット</button>\r\n            <p>{successMessage}</p>\r\n            <h2>投票数</h2>\r\n            <ul>\r\n                {games.map((game) => (\r\n                    game.game === name ? <li key={game.game}>{game.game}: {game.count}</li> : null\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Bort;\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}